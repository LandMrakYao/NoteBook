## Java Socket

### 网络基础简介

#### TCP/IP协议

TCP/IP是目前世界上应用最为广泛的协议

是以TCP和IP为基础的不用层次上多个协议的集合

也称：TCP/IP协议族 或 TCP/IP协议栈

TCP： Transmission Control Protocol 传输控制协议

IP： Internet Prorocol 互联网协议

#### TCP/IP模型

5、应用层（HTTP超文本传输协议、FTP文件传输协议、

SMTP简单邮件传送协议、Telnet远程登录服务）

4、传输层（TCP/IP协议）

3、网络层

2、数据链路层

1、物理层（网线、双绞线、网卡）

#### IP地址

为实现网络中不同计算机之间的通信，每台机器都必须有一个唯一的标识——**IP地址**

IP地址格式由32位二进制组成

#### 端口

1、用于区分不同应用程序

2、端口号范围为0~65535(2^16)，其中0~1023为系统所保留

3、IP地址和端口号组成了所谓的Socket，Socket是网络上运行的程序之间双向通信链路的终结点，是TCP和UDP的基础

4、http：80  ftp：21  telnet：23

#### Java中的网络支持

**针对网络通信的不同层次，Java提供的网络功能有四大类：**

1、InetAddress： 用于标识网络上的硬件资源。表示互联网协议(IP)地址

2、URL：统一资源定位符 通过URL可以直接读取或写入网络上的数据。表示Internet上某一资源的地址

URL由两部分组成：协议名称和资源名称，中间用冒号隔开

在java.net包中，提供了URL类来表示URL

3、Sockets：使用TCP协议实现网络通信的Socket相关的类。

4、Datagram：使用UDP协议，将数据保存在数据报中，通过网络进行通信。

#### 使用URL读取网页内容

1、通过URL对象的openStream()方法可以得到指定资源的输入流。

2、通过输入流可以读取，访问网络上的数据。

### Socket通信

#### TCP协议是面向连接、可靠的、有序的、以字节流的方式发送数据

#### 基于TCP协议实现网络通信的类

客户端的socket类

服务器端的ServerSocket类

#### Socket通信模型

![1540347756986](C:\Users\ADMINI~1\AppData\Local\Temp\1540347756986.png)

#### Socket通信实现步骤

1、创建ServerSocket和Socke

2、打开连接到Socket的输入/输出流

3、按照协议对Socket进行读/写操作

4、关闭输入输出流、关闭Socket

#### 服务器端：

1、创建ServerSocket对象，绑定监听端口

2、通过accept()方法监听客户端请求

3、连接建立后，通过输入流读取客户端发送的请求信息

4、通过输出流向客户端发送响应信息

5、关闭相关资源

#### 客户端：

1、创建Socket对象，指明需要连接的服务器的地址和端口号

2、连接建立后，通过输出流向服务器端发送请求信息

3、通过输入流获取服务器响应的信息

4、关闭相关资源

